import{R as r,H as S,s as w,G as b,c as L,a as _,g as v,A as T,I,r as g,p as d,b as U,T as f,d as E,e as C,f as R}from"./vendor.84677dc6.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const c of t.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function s(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?t.credentials="include":e.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function i(e){if(e.ep)return;e.ep=!0;const t=s(e);fetch(e.href,t)}})();const A="modulepreload",O=function(n){return"/"+n},k={},h=function(o,s,i){return!s||s.length===0?o():Promise.all(s.map(e=>{if(e=O(e),e in k)return;k[e]=!0;const t=e.endsWith(".css"),c=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${c}`))return;const a=document.createElement("link");if(a.rel=t?"stylesheet":A,t||(a.as="script",a.crossOrigin=""),a.href=e,document.head.appendChild(a),t)return new Promise((u,l)=>{a.addEventListener("load",u),a.addEventListener("error",()=>l(new Error(`Unable to preload CSS for ${e}`)))})})).then(()=>o())};const W=r.createContext({value:"https://webhook-store.herokuapp.com",setValue:n=>{}}),P="identityToken",y="accessToken",x=n=>{const s=`${new URL(n).origin}/graphql`,i=s.replace("http","ws"),e=new S({uri:s}),t=w(async(u,{headers:l})=>{var p=localStorage.getItem(y);if(!p){const m=localStorage.getItem(P);m&&(p=await q(m,n))}return{headers:{...l,authorization:p?`Bearer ${p}`:""}}}),c=new b(L({url:i})),a=_(({query:u})=>{const l=v(u);return l.kind==="OperationDefinition"&&l.operation==="subscription"},c,t.concat(e));return new T({link:a,cache:new I})},q=async(n,o)=>{const s=new URL(o).hostname,t=(await(await fetch("https://openwebhook-auth.herokuapp.com/webhook-store-auth/access-token",{headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},method:"POST",body:JSON.stringify({webhookStoreUrl:s})})).json()).accessToken;return localStorage.setItem(y,t),t},N=(n,o,s)=>{const i=localStorage.getItem(n)||o,[e,t]=g.exports.useState(i);return[e,a=>{s(a)?(localStorage.setItem(n,a),t(a)):console.warn("invalid new value, not stored"),d.capture(`${n} update attempt`,{value:a})}]};function $(n){let o;try{o=new URL(n)}catch{return!1}return o.protocol==="http:"||o.protocol==="https:"}const D=r.lazy(()=>h(()=>import("./index.50794ff6.js"),["assets/index.50794ff6.js","assets/index.447dfe89.css","assets/index.280dd77f.js","assets/index.7eb7bce9.css","assets/vendor.84677dc6.js","assets/index.19ede532.js","assets/index.47fc0884.css"])),F=r.lazy(()=>h(()=>import("./TopNav.0ea02e69.js"),["assets/TopNav.0ea02e69.js","assets/TopNav.d664add3.css","assets/vendor.84677dc6.js","assets/animation-container.747495e2.js","assets/animation-container.7a60cc3d.css","assets/index.280dd77f.js","assets/index.7eb7bce9.css"])),H=r.lazy(()=>h(()=>import("./WebhookList.component.5c18bd49.js"),["assets/WebhookList.component.5c18bd49.js","assets/WebhookList.component.42ce049d.css","assets/vendor.84677dc6.js","assets/animation-container.747495e2.js","assets/animation-container.7a60cc3d.css","assets/index.280dd77f.js","assets/index.7eb7bce9.css","assets/index.19ede532.js","assets/index.47fc0884.css"]));function V(){const n=window.location.hostname==="demo.openwebhook.io"?"https://webhook-store.herokuapp.com":window.location.origin,[o,s]=N("webhookStoreUrl",n,$);return r.createElement(W.Provider,{value:{value:o,setValue:s}},r.createElement(U,{client:x(o)},r.createElement(f,{name:f.names.dark},r.createElement(g.exports.Suspense,{fallback:r.createElement("div",null,"Loading...")},r.createElement(D,{topnav:r.createElement(F,null)},r.createElement(H,null))))))}E.configure({apiKey:"hbp_5dLUqCorpak7oThEbZ6GpdY4q7eGqC0v21xN",environment:"production"});d.init("phc_gaWo4JFok5X2n792nFxFstwZDJS9b2Wtt9jFTmEMV0Z",{api_host:"https://app.posthog.com"});d.capture("my event",{property:"value"});const j=C.createRoot(document.getElementById("root"));j.render(r.createElement(R,{honeybadger:E},r.createElement(r.StrictMode,null,r.createElement(V,null))));export{y as A,P as I,W,h as _};
//# sourceMappingURL=index.d05385a8.js.map
