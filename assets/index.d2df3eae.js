import{R as r,H as E,s as S,G as L,c as v,a as _,g as T,A as I,I as R,r as b,B as d,b as U,T as g,d as y,e as A,f as C}from"./vendor.89716939.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const a of e.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&l(a)}).observe(document,{childList:!0,subtree:!0});function s(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerpolicy&&(e.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?e.credentials="include":t.crossorigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function l(t){if(t.ep)return;t.ep=!0;const e=s(t);fetch(t.href,e)}})();const O="modulepreload",P=function(n){return"/"+n},w={},m=function(o,s,l){if(!s||s.length===0)return o();const t=document.getElementsByTagName("link");return Promise.all(s.map(e=>{if(e=P(e),e in w)return;w[e]=!0;const a=e.endsWith(".css"),h=a?'[rel="stylesheet"]':"";if(!!l)for(let c=t.length-1;c>=0;c--){const u=t[c];if(u.href===e&&(!a||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${e}"]${h}`))return;const i=document.createElement("link");if(i.rel=a?"stylesheet":O,a||(i.as="script",i.crossOrigin=""),i.href=e,document.head.appendChild(i),a)return new Promise((c,u)=>{i.addEventListener("load",c),i.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${e}`)))})})).then(()=>o())};const W=r.createContext({value:"https://webhook-store.herokuapp.com",setValue:n=>{}}),x="identityToken",p="accessToken",N=n=>{const s=`${new URL(n).origin}/graphql`,l=s.replace("http","ws"),t=new E({uri:s}),e=S(async(i,{headers:c})=>{var u=localStorage.getItem(p);if(!u){const k=localStorage.getItem(x);k&&(u=await $(k,n))}return{headers:{...c,authorization:u?`Bearer ${u}`:""}}});var a=localStorage.getItem(p);const h=new L(v({url:l,connectionParams:a?{authToken:a}:{}})),f=_(({query:i})=>{const c=T(i);return c.kind==="OperationDefinition"&&c.operation==="subscription"},h,e.concat(t));return new I({link:f,cache:new R})},$=async(n,o)=>{const s=new URL(o).hostname,e=(await(await fetch("https://openwebhook-auth.herokuapp.com/webhook-store-auth/access-token",{headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},method:"POST",body:JSON.stringify({webhookStoreUrl:s})})).json()).accessToken;return localStorage.setItem(p,e),e},q=(n,o,s)=>{const l=localStorage.getItem(n)||o,[t,e]=b.exports.useState(l);return[t,h=>{s(h)?(localStorage.setItem(n,h),e(h)):console.warn("invalid new value, not stored"),d.capture(`${n} update attempt`,{value:h})}]};function B(n){let o;try{o=new URL(n)}catch{return!1}return o.protocol==="http:"||o.protocol==="https:"}const D=r.lazy(()=>m(()=>import("./index.0f6c51d3.js"),["assets/index.0f6c51d3.js","assets/index.a747afcd.js","assets/vendor.89716939.js","assets/index.7eb7bce9.css","assets/index.f5571c63.js","assets/index.6e947b39.css","assets/index.447dfe89.css"])),F=r.lazy(()=>m(()=>import("./TopNav.4fa90365.js"),["assets/TopNav.4fa90365.js","assets/vendor.89716939.js","assets/animation-container.e13243e1.js","assets/index.a747afcd.js","assets/index.7eb7bce9.css","assets/animation-container.7a60cc3d.css","assets/TopNav.01e7a08e.css"])),H=r.lazy(()=>m(()=>import("./WebhookList.component.95cfd09b.js"),["assets/WebhookList.component.95cfd09b.js","assets/vendor.89716939.js","assets/animation-container.e13243e1.js","assets/index.a747afcd.js","assets/index.7eb7bce9.css","assets/animation-container.7a60cc3d.css","assets/index.f5571c63.js","assets/index.6e947b39.css","assets/WebhookList.component.d122b9a5.css"]));function V(){const n=window.location.hostname==="demo.openwebhook.io"?"https://webhook-store.herokuapp.com":window.location.origin,[o,s]=q("webhookStoreUrl",n,B);return r.createElement(W.Provider,{value:{value:o,setValue:s}},r.createElement(U,{client:N(o)},r.createElement(g,{name:g.names.dark},r.createElement(b.exports.Suspense,{fallback:r.createElement("div",null,"Loading...")},r.createElement(D,{topnav:r.createElement(F,null)},r.createElement(H,null))))))}const j=window.location.hostname==="github.webhook.store";j&&(window.location.href="https://openwebhook-auth.herokuapp.com/oauth/login");y.configure({apiKey:"hbp_5dLUqCorpak7oThEbZ6GpdY4q7eGqC0v21xN",environment:"production"});d.init("phc_gaWo4JFok5X2n792nFxFstwZDJS9b2Wtt9jFTmEMV0Z",{api_host:"https://app.posthog.com"});d.capture("my event",{property:"value"});const z=A.createRoot(document.getElementById("root"));z.render(r.createElement(C,{honeybadger:y},r.createElement(r.StrictMode,null,r.createElement(V,null))));export{p as A,x as I,W,m as _};
//# sourceMappingURL=index.d2df3eae.js.map
