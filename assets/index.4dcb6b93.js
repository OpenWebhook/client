import{R as r,H as E,s as y,G as S,c as L,a as _,g as v,A as T,I,r as g,q as h,b as U,T as f,d as w,e as R,f as A}from"./vendor.3b72b70b.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const c of t.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function s(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?t.credentials="include":e.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function i(e){if(e.ep)return;e.ep=!0;const t=s(e);fetch(e.href,t)}})();const C="modulepreload",O=function(n){return"/"+n},k={},d=function(o,s,i){return!s||s.length===0?o():Promise.all(s.map(e=>{if(e=O(e),e in k)return;k[e]=!0;const t=e.endsWith(".css"),c=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${c}`))return;const a=document.createElement("link");if(a.rel=t?"stylesheet":C,t||(a.as="script",a.crossOrigin=""),a.href=e,document.head.appendChild(a),t)return new Promise((u,l)=>{a.addEventListener("load",u),a.addEventListener("error",()=>l(new Error(`Unable to preload CSS for ${e}`)))})})).then(()=>o())};const W=r.createContext({value:"https://webhook-store.herokuapp.com",setValue:n=>{}}),q="identityToken",b="accessToken",P=n=>{const s=`${new URL(n).origin}/graphql`,i=s.replace("http","ws"),e=new E({uri:s}),t=y(async(u,{headers:l})=>{var p=localStorage.getItem(b);if(!p){const m=localStorage.getItem(q);m&&(p=await x(m,n))}return{headers:{...l,authorization:p?`Bearer ${p}`:""}}}),c=new S(L({url:i})),a=_(({query:u})=>{const l=v(u);return l.kind==="OperationDefinition"&&l.operation==="subscription"},c,t.concat(e));return new T({link:a,cache:new I})},x=async(n,o)=>{const s=new URL(o).hostname,t=(await(await fetch("https://openwebhook-auth.herokuapp.com/webhook-store-auth/access-token",{headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},method:"POST",body:JSON.stringify({webhookStoreUrl:s})})).json()).accessToken;return localStorage.setItem(b,t),t},$=(n,o,s)=>{const i=localStorage.getItem(n)||o,[e,t]=g.exports.useState(i);return[e,a=>{s(a)?(localStorage.setItem(n,a),t(a)):console.warn("invalid new value, not stored"),h.capture(`${n} update attempt`,{value:a})}]};function N(n){let o;try{o=new URL(n)}catch{return!1}return o.protocol==="http:"||o.protocol==="https:"}const D=r.lazy(()=>d(()=>import("./index.e2abfb1e.js"),["assets/index.e2abfb1e.js","assets/index.447dfe89.css","assets/index.df28aa48.js","assets/index.7eb7bce9.css","assets/vendor.3b72b70b.js","assets/index.0730fa2b.js","assets/index.6e947b39.css"])),F=r.lazy(()=>d(()=>import("./TopNav.a2d28b75.js"),["assets/TopNav.a2d28b75.js","assets/TopNav.01e7a08e.css","assets/vendor.3b72b70b.js","assets/animation-container.7e87b7fd.js","assets/animation-container.7a60cc3d.css","assets/index.df28aa48.js","assets/index.7eb7bce9.css"])),H=r.lazy(()=>d(()=>import("./WebhookList.component.2faa00be.js"),["assets/WebhookList.component.2faa00be.js","assets/WebhookList.component.d122b9a5.css","assets/vendor.3b72b70b.js","assets/animation-container.7e87b7fd.js","assets/animation-container.7a60cc3d.css","assets/index.df28aa48.js","assets/index.7eb7bce9.css","assets/index.0730fa2b.js","assets/index.6e947b39.css"]));function V(){const n=window.location.hostname==="demo.openwebhook.io"?"https://webhook-store.herokuapp.com":window.location.origin,[o,s]=$("webhookStoreUrl",n,N);return r.createElement(W.Provider,{value:{value:o,setValue:s}},r.createElement(U,{client:P(o)},r.createElement(f,{name:f.names.dark},r.createElement(g.exports.Suspense,{fallback:r.createElement("div",null,"Loading...")},r.createElement(D,{topnav:r.createElement(F,null)},r.createElement(H,null))))))}const j=window.location.hostname==="github.webhook.store";j&&(window.location.href="https://openwebhook-auth.herokuapp.com/oauth/login");w.configure({apiKey:"hbp_5dLUqCorpak7oThEbZ6GpdY4q7eGqC0v21xN",environment:"production"});h.init("phc_gaWo4JFok5X2n792nFxFstwZDJS9b2Wtt9jFTmEMV0Z",{api_host:"https://app.posthog.com"});h.capture("my event",{property:"value"});const z=R.createRoot(document.getElementById("root"));z.render(r.createElement(A,{honeybadger:w},r.createElement(r.StrictMode,null,r.createElement(V,null))));export{b as A,q as I,W,d as _};
//# sourceMappingURL=index.4dcb6b93.js.map
