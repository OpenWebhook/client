import{R as r,H as b,s as y,G as S,c as L,a as _,g as v,A as T,I,r as w,B as m,b as R,T as k,d as E,e as C,f as U}from"./vendor.1cd59a01.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const a of e.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&l(a)}).observe(document,{childList:!0,subtree:!0});function s(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerpolicy&&(e.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?e.credentials="include":t.crossorigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function l(t){if(t.ep)return;t.ep=!0;const e=s(t);fetch(t.href,e)}})();const A="modulepreload",O=function(n){return"/"+n},g={},f=function(o,s,l){if(!s||s.length===0)return o();const t=document.getElementsByTagName("link");return Promise.all(s.map(e=>{if(e=O(e),e in g)return;g[e]=!0;const a=e.endsWith(".css"),u=a?'[rel="stylesheet"]':"";if(!!l)for(let c=t.length-1;c>=0;c--){const h=t[c];if(h.href===e&&(!a||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${e}"]${u}`))return;const i=document.createElement("link");if(i.rel=a?"stylesheet":A,a||(i.as="script",i.crossOrigin=""),i.href=e,document.head.appendChild(i),a)return new Promise((c,h)=>{i.addEventListener("load",c),i.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${e}`)))})})).then(()=>o())};const P=r.createContext({value:"https://webhook-store.herokuapp.com",setValue:n=>{}}),W="identityToken",d="accessToken",x=n=>{const s=`${new URL(n).origin}/graphql`,l=s.replace("http","ws"),t=new b({uri:s}),e=y(async(p,{headers:i})=>{var c=localStorage.getItem(d);if(!c){const h=localStorage.getItem(W);h&&(c=await N(h,n))}return{headers:{...i,authorization:c?`Bearer ${c}`:""}}}),a=new S(L({url:l,connectionParams:{authToken:localStorage.getItem(d)}})),u=_(({query:p})=>{const i=v(p);return i.kind==="OperationDefinition"&&i.operation==="subscription"},a,e.concat(t));return new T({link:u,cache:new I})},N=async(n,o)=>{const s=new URL(o).hostname,t=await(await fetch("https://openwebhook-auth.herokuapp.com/webhook-store-auth/access-token",{headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},method:"POST",body:JSON.stringify({webhookStoreUrl:s})})).json();if(t.statusCode>300)throw console.error("Cannot refresh token",t),new Error(t.message);const e=t.accessToken;return localStorage.setItem(d,e),e},$=(n,o,s)=>{const l=localStorage.getItem(n)||o,[t,e]=w.exports.useState(l);return[t,u=>{s(u)?(localStorage.setItem(n,u),e(u)):console.warn("invalid new value, not stored"),m.capture(`${n} update attempt`,{value:u})}]};function q(n){let o;try{o=new URL(n)}catch{return!1}return o.protocol==="http:"||o.protocol==="https:"}const B=r.lazy(()=>f(()=>import("./index.89f63794.js"),["assets/index.89f63794.js","assets/index.2aa136f4.js","assets/vendor.1cd59a01.js","assets/index.c73b4c6e.css","assets/index.447dfe89.css"])),D=r.lazy(()=>f(()=>import("./TopNav.c0f99792.js"),["assets/TopNav.c0f99792.js","assets/vendor.1cd59a01.js","assets/index.f2802359.js","assets/index.2aa136f4.js","assets/index.c73b4c6e.css","assets/index.d0772c44.css","assets/TopNav.d55e0533.css"])),F=r.lazy(()=>f(()=>import("./WebhookList.component.91c53c7d.js"),["assets/WebhookList.component.91c53c7d.js","assets/vendor.1cd59a01.js","assets/index.f2802359.js","assets/index.2aa136f4.js","assets/index.c73b4c6e.css","assets/index.d0772c44.css","assets/WebhookList.component.ca4371d1.css"]));function H(){const n=window.location.hostname==="demo.openwebhook.io"?"https://webhook-store.herokuapp.com":window.location.origin,[o,s]=$("webhookStoreUrl",n,q);return r.createElement(P.Provider,{value:{value:o,setValue:s}},r.createElement(R,{client:x(o)},r.createElement(k,{name:k.names.dark},r.createElement(w.exports.Suspense,{fallback:r.createElement("div",null,"Loading...")},r.createElement(B,{topnav:r.createElement(D,null)},r.createElement(F,null))))))}const V=window.location.hostname==="github.webhook.store";V&&(window.location.href="https://openwebhook-auth.herokuapp.com/oauth/login");E.configure({apiKey:"hbp_5dLUqCorpak7oThEbZ6GpdY4q7eGqC0v21xN",environment:"production"});m.init("phc_gaWo4JFok5X2n792nFxFstwZDJS9b2Wtt9jFTmEMV0Z",{api_host:"https://app.posthog.com"});m.capture("my event",{property:"value"});const z=C.createRoot(document.getElementById("root"));z.render(r.createElement(U,{honeybadger:E},r.createElement(r.StrictMode,null,r.createElement(H,null))));export{d as A,W as I,P as W,f as _};
//# sourceMappingURL=index.f0582f91.js.map
