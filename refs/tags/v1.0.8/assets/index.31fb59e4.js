import{R as r,H as b,s as y,G as v,c as L,a as _,g as T,A as I,I as R,r as w,B as E,b as C,T as k,d as S,e as U,f as A}from"./vendor.1cd59a01.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const a of e.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&l(a)}).observe(document,{childList:!0,subtree:!0});function s(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerpolicy&&(e.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?e.credentials="include":t.crossorigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function l(t){if(t.ep)return;t.ep=!0;const e=s(t);fetch(t.href,e)}})();const O="modulepreload",N=function(o){return"/"+o},g={},f=function(n,s,l){if(!s||s.length===0)return n();const t=document.getElementsByTagName("link");return Promise.all(s.map(e=>{if(e=N(e),e in g)return;g[e]=!0;const a=e.endsWith(".css"),u=a?'[rel="stylesheet"]':"";if(!!l)for(let c=t.length-1;c>=0;c--){const h=t[c];if(h.href===e&&(!a||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${e}"]${u}`))return;const i=document.createElement("link");if(i.rel=a?"stylesheet":O,a||(i.as="script",i.crossOrigin=""),i.href=e,document.head.appendChild(i),a)return new Promise((c,h)=>{i.addEventListener("load",c),i.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${e}`)))})})).then(()=>n())};const W=r.createContext({value:"https://webhook-store.herokuapp.com",setValue:o=>{}}),P="identityToken",m="accessToken",d="environment",x=o=>{const s=`${new URL(o).origin}/graphql`,l=s.replace("http","ws"),t=new b({uri:s}),e=y(async(p,{headers:i})=>{var c=localStorage.getItem(m);if(!c){const h=localStorage.getItem(P);h&&(c=await $(h,o))}return{headers:{...i,authorization:c?`Bearer ${c}`:""}}}),a=new v(L({url:l,connectionParams:{authToken:localStorage.getItem(m)}})),u=_(({query:p})=>{const i=T(p);return i.kind==="OperationDefinition"&&i.operation==="subscription"},a,e.concat(t));return new I({link:u,cache:new R})},$=async(o,n)=>{const s=new URL(n).hostname,t=await(await fetch("https://openwebhook-auth.herokuapp.com/webhook-store-auth/access-token",{headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},method:"POST",body:JSON.stringify({webhookStoreUrl:s})})).json();if(t.statusCode>300)throw console.error("Cannot refresh token",t),new Error(t.message);const e=t.accessToken;return localStorage.setItem(m,e),e},q=(o,n,s)=>{const l=localStorage.getItem(o)||n,[t,e]=w.exports.useState(l);return[t,u=>{s(u)?(localStorage.setItem(o,u),e(u)):console.warn("invalid new value, not stored"),E.capture(`${o} update attempt`,{value:u})}]};function B(o){let n;try{n=new URL(o)}catch{return!1}return n.protocol==="http:"||n.protocol==="https:"}const D=r.lazy(()=>f(()=>import("./index.89f63794.js"),["assets/index.89f63794.js","assets/index.2aa136f4.js","assets/vendor.1cd59a01.js","assets/index.c73b4c6e.css","assets/index.447dfe89.css"])),V=r.lazy(()=>f(()=>import("./TopNav.031bf019.js"),["assets/TopNav.031bf019.js","assets/vendor.1cd59a01.js","assets/index.f2802359.js","assets/index.2aa136f4.js","assets/index.c73b4c6e.css","assets/index.d0772c44.css","assets/TopNav.d55e0533.css"])),F=r.lazy(()=>f(()=>import("./WebhookList.component.1747605a.js"),["assets/WebhookList.component.1747605a.js","assets/vendor.1cd59a01.js","assets/index.f2802359.js","assets/index.2aa136f4.js","assets/index.c73b4c6e.css","assets/index.d0772c44.css","assets/WebhookList.component.ca4371d1.css"]));function H(){const o=window.location.hostname==="demo.openwebhook.io"?"https://webhook-store.herokuapp.com":window.location.origin,[n,s]=q("webhookStoreUrl",o,B);return r.createElement(W.Provider,{value:{value:n,setValue:s}},r.createElement(C,{client:x(n)},r.createElement(k,{name:k.names.dark},r.createElement(w.exports.Suspense,{fallback:r.createElement("div",null,"Loading...")},r.createElement(D,{topnav:r.createElement(V,null)},r.createElement(F,null))))))}const z=window.location.hostname==="github.webhook.store";z&&(window.location.href="https://openwebhook-auth.herokuapp.com/oauth/login");S.configure({apiKey:"hbp_5dLUqCorpak7oThEbZ6GpdY4q7eGqC0v21xN",environment:"production"});E.init("phc_gaWo4JFok5X2n792nFxFstwZDJS9b2Wtt9jFTmEMV0Z",{api_host:"https://app.posthog.com"});const G=()=>{localStorage.getItem(d)||(window.location.origin.startsWith("http://localhost:")?localStorage.setItem(d,"development"):localStorage.setItem(d,"production"))};G();const K=U.createRoot(document.getElementById("root"));K.render(r.createElement(A,{honeybadger:S},r.createElement(r.StrictMode,null,r.createElement(H,null))));export{m as A,d as E,P as I,W,f as _};
//# sourceMappingURL=index.31fb59e4.js.map
